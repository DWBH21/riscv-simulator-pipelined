\hypertarget{utils_8cpp}{}\doxysection{src/utils.cpp File Reference}
\label{utils_8cpp}\index{src/utils.cpp@{src/utils.cpp}}


Contains utility functions for the VM.  


{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}vm/registers.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}globals.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}vm/rv5s/pipeline\+\_\+registers.\+h\char`\"{}}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$filesystem$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
Include dependency graph for utils.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{utils_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{utils_8cpp_af3f95999ef175e14de3c42754e4224aa}{setup\+Vm\+State\+Directory}} ()
\item 
int64\+\_\+t \mbox{\hyperlink{utils_8cpp_a9f1db91cc23a2bfbba2379c15eb75d05}{Count\+Lines}} (const std\+::string \&filename)
\begin{DoxyCompactList}\small\item\em Counts the number of lines in a given file. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{utils_8cpp_a110b46ab6e189c14e24ed3e35680b91a}{Get\+Line\+From\+File}} (const std\+::string \&file\+Name, unsigned int line\+Number)
\begin{DoxyCompactList}\small\item\em Retrieves a specific line from a file. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{utils_8cpp_ac175dbe8421725a466a026a8eecf9b11}{Parse\+Escaped\+String}} (const std\+::string \&input)
\begin{DoxyCompactList}\small\item\em Parses a string containing escaped characters into its unescaped form. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{utils_8cpp_ae36d66b20fc71d0bfdee0a0fbdd9d8de}{Dump\+Errors}} (const std\+::filesystem\+::path \&filename, const std\+::vector$<$ \mbox{\hyperlink{structParseError}{Parse\+Error}} $>$ \&errors)
\item 
void \mbox{\hyperlink{utils_8cpp_a4d37503b8b0f0ed512522c5ba71682ca}{Dump\+No\+Errors}} (const std\+::filesystem\+::path \&filename)
\item 
void \mbox{\hyperlink{utils_8cpp_a4645b448c63ee103e8ae566d83b45470}{Dump\+Registers}} (const std\+::filesystem\+::path \&filename, \mbox{\hyperlink{classRegisterFile}{Register\+File}} \&register\+\_\+file)
\item 
void \mbox{\hyperlink{utils_8cpp_a05b17231f2df6613889cdeccfdffa6c0}{Dump\+Disasssembly}} (const std\+::filesystem\+::path \&filename, \mbox{\hyperlink{structAssembledProgram}{Assembled\+Program}} \&program)
\item 
void \mbox{\hyperlink{utils_8cpp_a105ade81d4e257f3764e557f57773066}{Setup\+Config\+File}} ()
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{utils_8cpp_adcd80ef37f66a812d3b34255932d58c8}{write\+\_\+json\+\_\+field}} (std\+::ofstream \&file, const std\+::string \&key, const T \&value, bool is\+\_\+hex=false, bool last=false)
\begin{DoxyCompactList}\small\item\em Helper function to write key/value pairs to a JSON stream. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{utils_8cpp_a420ccf358036a25409c17cf6e2122f2c}{write\+\_\+json\+\_\+field}} (std\+::ofstream \&file, const std\+::string \&key, int64\+\_\+t value, bool last=false)
\item 
void \mbox{\hyperlink{utils_8cpp_aca91bc10c457f40f1461f3070f90aad4}{write\+\_\+json\+\_\+field}} (std\+::ofstream \&file, const std\+::string \&key, uint64\+\_\+t value, bool last=false)
\item 
void \mbox{\hyperlink{utils_8cpp_a7a6037c5c8000f1f3b2a160ff6611d41}{write\+\_\+json\+\_\+field}} (std\+::ofstream \&file, const std\+::string \&key, uint32\+\_\+t value, bool last=false)
\item 
void \mbox{\hyperlink{utils_8cpp_a8082fcc90b6cf515cf83d0bdc5b9dbff}{write\+\_\+json\+\_\+field}} (std\+::ofstream \&file, const std\+::string \&key, int value, bool last=false)
\item 
void \mbox{\hyperlink{utils_8cpp_aaa6b9e3c89e8a80d22d63904650f6944}{write\+\_\+json\+\_\+field}} (std\+::ofstream \&file, const std\+::string \&key, bool value, bool last=false)
\item 
void \mbox{\hyperlink{utils_8cpp_a7fcefe58df312dfca4e0475c20cf61bd}{Dump\+Pipeline\+Registers}} (std\+::ofstream \&file, const \mbox{\hyperlink{structIF__ID__Reg}{IF\+\_\+\+ID\+\_\+\+Reg}} \&if\+\_\+id, const \mbox{\hyperlink{structID__EX__Reg}{ID\+\_\+\+EX\+\_\+\+Reg}} \&id\+\_\+ex, const \mbox{\hyperlink{structEX__MEM__Reg}{EX\+\_\+\+MEM\+\_\+\+Reg}} \&ex\+\_\+mem, const \mbox{\hyperlink{structMEM__WB__Reg}{MEM\+\_\+\+WB\+\_\+\+Reg}} \&mem\+\_\+wb)
\begin{DoxyCompactList}\small\item\em Dumps the state of all 5-\/stage pipeline registers to a JSON stream. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Contains utility functions for the VM. 

\begin{DoxyAuthor}{Author}
Vishank Singh, \href{https://github.com/VishankSingh}{\texttt{ https\+://github.\+com/\+Vishank\+Singh}} 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{utils_8cpp_a9f1db91cc23a2bfbba2379c15eb75d05}\label{utils_8cpp_a9f1db91cc23a2bfbba2379c15eb75d05}} 
\index{utils.cpp@{utils.cpp}!CountLines@{CountLines}}
\index{CountLines@{CountLines}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{CountLines()}{CountLines()}}
{\footnotesize\ttfamily int64\+\_\+t Count\+Lines (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename }\end{DoxyParamCaption})}



Counts the number of lines in a given file. 


\begin{DoxyParams}{Parameters}
{\em filename} & The name of the file to count lines in. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of lines in the file. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::ios\+\_\+base\+::failure} & If the file cannot be opened. \\
\hline
\end{DoxyExceptions}
\mbox{\Hypertarget{utils_8cpp_a05b17231f2df6613889cdeccfdffa6c0}\label{utils_8cpp_a05b17231f2df6613889cdeccfdffa6c0}} 
\index{utils.cpp@{utils.cpp}!DumpDisasssembly@{DumpDisasssembly}}
\index{DumpDisasssembly@{DumpDisasssembly}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{DumpDisasssembly()}{DumpDisasssembly()}}
{\footnotesize\ttfamily void Dump\+Disasssembly (\begin{DoxyParamCaption}\item[{const std\+::filesystem\+::path \&}]{filename,  }\item[{\mbox{\hyperlink{structAssembledProgram}{Assembled\+Program}} \&}]{program }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_ae36d66b20fc71d0bfdee0a0fbdd9d8de}\label{utils_8cpp_ae36d66b20fc71d0bfdee0a0fbdd9d8de}} 
\index{utils.cpp@{utils.cpp}!DumpErrors@{DumpErrors}}
\index{DumpErrors@{DumpErrors}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{DumpErrors()}{DumpErrors()}}
{\footnotesize\ttfamily void Dump\+Errors (\begin{DoxyParamCaption}\item[{const std\+::filesystem\+::path \&}]{filename,  }\item[{const std\+::vector$<$ \mbox{\hyperlink{structParseError}{Parse\+Error}} $>$ \&}]{errors }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_a4d37503b8b0f0ed512522c5ba71682ca}\label{utils_8cpp_a4d37503b8b0f0ed512522c5ba71682ca}} 
\index{utils.cpp@{utils.cpp}!DumpNoErrors@{DumpNoErrors}}
\index{DumpNoErrors@{DumpNoErrors}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{DumpNoErrors()}{DumpNoErrors()}}
{\footnotesize\ttfamily void Dump\+No\+Errors (\begin{DoxyParamCaption}\item[{const std\+::filesystem\+::path \&}]{filename }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_a7fcefe58df312dfca4e0475c20cf61bd}\label{utils_8cpp_a7fcefe58df312dfca4e0475c20cf61bd}} 
\index{utils.cpp@{utils.cpp}!DumpPipelineRegisters@{DumpPipelineRegisters}}
\index{DumpPipelineRegisters@{DumpPipelineRegisters}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{DumpPipelineRegisters()}{DumpPipelineRegisters()}}
{\footnotesize\ttfamily void Dump\+Pipeline\+Registers (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const \mbox{\hyperlink{structIF__ID__Reg}{IF\+\_\+\+ID\+\_\+\+Reg}} \&}]{if\+\_\+id,  }\item[{const \mbox{\hyperlink{structID__EX__Reg}{ID\+\_\+\+EX\+\_\+\+Reg}} \&}]{id\+\_\+ex,  }\item[{const \mbox{\hyperlink{structEX__MEM__Reg}{EX\+\_\+\+MEM\+\_\+\+Reg}} \&}]{ex\+\_\+mem,  }\item[{const \mbox{\hyperlink{structMEM__WB__Reg}{MEM\+\_\+\+WB\+\_\+\+Reg}} \&}]{mem\+\_\+wb }\end{DoxyParamCaption})}



Dumps the state of all 5-\/stage pipeline registers to a JSON stream. 


\begin{DoxyParams}{Parameters}
{\em file} & The output file stream to write to. \\
\hline
{\em if\+\_\+id} & The IF/\+ID pipeline register. \\
\hline
{\em id\+\_\+ex} & The ID/\+EX pipeline register. \\
\hline
{\em ex\+\_\+mem} & The EX/\+MEM pipeline register. \\
\hline
{\em mem\+\_\+wb} & The MEM/\+WB pipeline register. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{utils_8cpp_a4645b448c63ee103e8ae566d83b45470}\label{utils_8cpp_a4645b448c63ee103e8ae566d83b45470}} 
\index{utils.cpp@{utils.cpp}!DumpRegisters@{DumpRegisters}}
\index{DumpRegisters@{DumpRegisters}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{DumpRegisters()}{DumpRegisters()}}
{\footnotesize\ttfamily void Dump\+Registers (\begin{DoxyParamCaption}\item[{const std\+::filesystem\+::path \&}]{filename,  }\item[{\mbox{\hyperlink{classRegisterFile}{Register\+File}} \&}]{register\+\_\+file }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_a110b46ab6e189c14e24ed3e35680b91a}\label{utils_8cpp_a110b46ab6e189c14e24ed3e35680b91a}} 
\index{utils.cpp@{utils.cpp}!GetLineFromFile@{GetLineFromFile}}
\index{GetLineFromFile@{GetLineFromFile}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{GetLineFromFile()}{GetLineFromFile()}}
{\footnotesize\ttfamily std\+::string Get\+Line\+From\+File (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{file\+Name,  }\item[{unsigned int}]{line\+Number }\end{DoxyParamCaption})}



Retrieves a specific line from a file. 


\begin{DoxyParams}{Parameters}
{\em file\+Name} & The name of the file to read from. \\
\hline
{\em line\+Number} & The 1-\/based index of the line to retrieve. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The content of the specified line as a string. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::out\+\_\+of\+\_\+range} & If the line\+Number is invalid. \\
\hline
{\em std\+::ios\+\_\+base\+::failure} & If the file cannot be opened. \\
\hline
\end{DoxyExceptions}
\mbox{\Hypertarget{utils_8cpp_ac175dbe8421725a466a026a8eecf9b11}\label{utils_8cpp_ac175dbe8421725a466a026a8eecf9b11}} 
\index{utils.cpp@{utils.cpp}!ParseEscapedString@{ParseEscapedString}}
\index{ParseEscapedString@{ParseEscapedString}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{ParseEscapedString()}{ParseEscapedString()}}
{\footnotesize\ttfamily std\+::string Parse\+Escaped\+String (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{input }\end{DoxyParamCaption})}



Parses a string containing escaped characters into its unescaped form. 


\begin{DoxyParams}{Parameters}
{\em input} & The input string with escaped characters. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The unescaped string. 
\end{DoxyReturn}
\mbox{\Hypertarget{utils_8cpp_a105ade81d4e257f3764e557f57773066}\label{utils_8cpp_a105ade81d4e257f3764e557f57773066}} 
\index{utils.cpp@{utils.cpp}!SetupConfigFile@{SetupConfigFile}}
\index{SetupConfigFile@{SetupConfigFile}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{SetupConfigFile()}{SetupConfigFile()}}
{\footnotesize\ttfamily void Setup\+Config\+File (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_af3f95999ef175e14de3c42754e4224aa}\label{utils_8cpp_af3f95999ef175e14de3c42754e4224aa}} 
\index{utils.cpp@{utils.cpp}!setupVmStateDirectory@{setupVmStateDirectory}}
\index{setupVmStateDirectory@{setupVmStateDirectory}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{setupVmStateDirectory()}{setupVmStateDirectory()}}
{\footnotesize\ttfamily void setup\+Vm\+State\+Directory (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_aaa6b9e3c89e8a80d22d63904650f6944}\label{utils_8cpp_aaa6b9e3c89e8a80d22d63904650f6944}} 
\index{utils.cpp@{utils.cpp}!write\_json\_field@{write\_json\_field}}
\index{write\_json\_field@{write\_json\_field}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{write\_json\_field()}{write\_json\_field()}\hspace{0.1cm}{\footnotesize\ttfamily [1/6]}}
{\footnotesize\ttfamily void write\+\_\+json\+\_\+field (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const std\+::string \&}]{key,  }\item[{bool}]{value,  }\item[{bool}]{last = {\ttfamily false} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_adcd80ef37f66a812d3b34255932d58c8}\label{utils_8cpp_adcd80ef37f66a812d3b34255932d58c8}} 
\index{utils.cpp@{utils.cpp}!write\_json\_field@{write\_json\_field}}
\index{write\_json\_field@{write\_json\_field}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{write\_json\_field()}{write\_json\_field()}\hspace{0.1cm}{\footnotesize\ttfamily [2/6]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void write\+\_\+json\+\_\+field (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const std\+::string \&}]{key,  }\item[{const T \&}]{value,  }\item[{bool}]{is\+\_\+hex = {\ttfamily false},  }\item[{bool}]{last = {\ttfamily false} }\end{DoxyParamCaption})}



Helper function to write key/value pairs to a JSON stream. 

\mbox{\Hypertarget{utils_8cpp_a8082fcc90b6cf515cf83d0bdc5b9dbff}\label{utils_8cpp_a8082fcc90b6cf515cf83d0bdc5b9dbff}} 
\index{utils.cpp@{utils.cpp}!write\_json\_field@{write\_json\_field}}
\index{write\_json\_field@{write\_json\_field}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{write\_json\_field()}{write\_json\_field()}\hspace{0.1cm}{\footnotesize\ttfamily [3/6]}}
{\footnotesize\ttfamily void write\+\_\+json\+\_\+field (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const std\+::string \&}]{key,  }\item[{int}]{value,  }\item[{bool}]{last = {\ttfamily false} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_a420ccf358036a25409c17cf6e2122f2c}\label{utils_8cpp_a420ccf358036a25409c17cf6e2122f2c}} 
\index{utils.cpp@{utils.cpp}!write\_json\_field@{write\_json\_field}}
\index{write\_json\_field@{write\_json\_field}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{write\_json\_field()}{write\_json\_field()}\hspace{0.1cm}{\footnotesize\ttfamily [4/6]}}
{\footnotesize\ttfamily void write\+\_\+json\+\_\+field (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const std\+::string \&}]{key,  }\item[{int64\+\_\+t}]{value,  }\item[{bool}]{last = {\ttfamily false} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_a7a6037c5c8000f1f3b2a160ff6611d41}\label{utils_8cpp_a7a6037c5c8000f1f3b2a160ff6611d41}} 
\index{utils.cpp@{utils.cpp}!write\_json\_field@{write\_json\_field}}
\index{write\_json\_field@{write\_json\_field}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{write\_json\_field()}{write\_json\_field()}\hspace{0.1cm}{\footnotesize\ttfamily [5/6]}}
{\footnotesize\ttfamily void write\+\_\+json\+\_\+field (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const std\+::string \&}]{key,  }\item[{uint32\+\_\+t}]{value,  }\item[{bool}]{last = {\ttfamily false} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{utils_8cpp_aca91bc10c457f40f1461f3070f90aad4}\label{utils_8cpp_aca91bc10c457f40f1461f3070f90aad4}} 
\index{utils.cpp@{utils.cpp}!write\_json\_field@{write\_json\_field}}
\index{write\_json\_field@{write\_json\_field}!utils.cpp@{utils.cpp}}
\doxysubsubsection{\texorpdfstring{write\_json\_field()}{write\_json\_field()}\hspace{0.1cm}{\footnotesize\ttfamily [6/6]}}
{\footnotesize\ttfamily void write\+\_\+json\+\_\+field (\begin{DoxyParamCaption}\item[{std\+::ofstream \&}]{file,  }\item[{const std\+::string \&}]{key,  }\item[{uint64\+\_\+t}]{value,  }\item[{bool}]{last = {\ttfamily false} }\end{DoxyParamCaption})}

